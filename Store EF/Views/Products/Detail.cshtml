@using Store_EF.Models
@using Store_EF.Models.Extensions;
@model Product
@{
    ViewBag.Title = Model.Title;
}

<main class="product-page">
    <div class="container">
        <!-- Search bar-->
        <div class="product-container">
            <div class="search-bar d-none d-md-flex">
                <input type="text"
                       name=""
                       id=""
                       class="search-bar__input"
                       placeholder="Search for item" />
                <button class="search-bar__submit">
                    <img src="./assets/icons/search.svg"
                         alt=""
                         class="search-bar__icon icon" />
                </button>
            </div>
        </div>
        <div class="product-container">
       
        </div>
        <!-- Product content-->
        <div class="product-container prod-content">
            <div class="row">
                <!-- Product review -->
                <div class="col-5 col-xl-6 col-lg-12">
                    <div class="prod-preview">
                        @if (ViewBag.Galleries != null)
                        {
                            <div class="prod-preview__list">
                                @foreach (Gallery gallery in ViewBag.Galleries)
                                {
                                    <div class="prod-preview__item">
                                        <img src="~/Public/Imgs/Products/@gallery.Thumbnail"
                                             alt=""
                                             class="prod-preview__img" />
                                    </div>
                                }
                            </div>
                            <div class="prod-preview__thumbs d-md-none">
                                @foreach (Gallery gallery in ViewBag.Galleries)
                                {
                                    <img src="~/Public/Imgs/Products/@gallery.Thumbnail"
                                         alt=""
                                         class="prod-preview__thumb-img prod-preview__thumb-img--current" />
                                }
                            </div>
                        }
                    </div>
                </div>
                <!-- Product info -->
                <div class="col-7 col-xl-6 col-lg-12">
                    <form action="@Url.Action("Add", "Cart")" method="post" class="form">
                        <section class="prod-info">
                            <h1 class="prod-info__heading">
                                @Model.Title
                            </h1>
                            <div class="row">
                                <div class="col-5 col-xxl-6 col-xl-12">
                                    <div class="prod-property">
                                        <img src="./assets/icons/start.svg"
                                             alt=""
                                             class="prod-property__icon" />
                                        <h4 class="prod-property__title">
                                            (3.5) 1100 reviews
                                        </h4>
                                    </div>
                                    <label for=""
                                           class="form__label prod-info__label">Size/Weight</label>
                                    <div class="filter__form-group">
                                        <div class="form__select-wrap">
                                            <div class="form__select prod-info__select"
                                                 style="--width: 147px">
                                                500g
                                                <img src="./assets/icons/select-arrow.svg"
                                                     class="form__select-arrow icon"
                                                     alt="" />
                                            </div>
                                            <div class="form__select prod-info__select">
                                                Gram
                                                <img src="./assets/icons/select-arrow.svg"
                                                     class="form__select-arrow icon"
                                                     alt="" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="filter__form-group">
                                        <div class="form__tags">
                                            <button class="form__tag prod-info__tag">
                                                Small
                                            </button>
                                            <button class="form__tag prod-info__tag">
                                                Medium
                                            </button>
                                            <button class="form__tag prod-info__tag">
                                                Large
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-7 col-xxl-6 col-xl-12">
                                    <div class="prod-propertys">
                                        <div class="prod-property">
                                            <img src="./assets/icons/document.svg"
                                                 alt=""
                                                 class="prod-property__icon icon" />

                                            <h4 class="prod-property__title">
                                                Compare
                                            </h4>
                                        </div>

                                        <div class="prod-property">
                                            <img src="./assets/icons/cart.svg"
                                                 alt=""
                                                 class="prod-property__icon icon" />
                                            <div>
                                                <h4 class="prod-property__title">
                                                    Delivery
                                                </h4>
                                                <p class="prod-property__desc">
                                                    From $6 for 1-3 days
                                                </p>
                                            </div>
                                        </div>

                                        <div class="prod-property">
                                            <img src="./assets/icons/bag.svg"
                                                 alt=""
                                                 class="prod-property__icon icon" />
                                            <div>
                                                <h4 class="prod-property__title">
                                                    Pickup
                                                </h4>
                                                <p class="prod-property__desc">
                                                    Out of 2 store,
                                                    today
                                                </p>
                                            </div>
                                        </div>

                                        <div class="prod-info__card">
                                            <div class="prod-info__row">
                                                <span class="prod-info__price">@Model.FormattedPrice(true)</span>
                                                <span class="prod-info__tax">@Model.DiscountPercentage()%</span>
                                            </div>
                                            <span class="prod-info__totle-price">@Model.FormattedPrice()</span>
                                            <div class="prod-info__row">
                                                <input type="hidden" name="product" value="@Model.ProductId" />
                                                <button class="btn btn--primary prod-info__add-to-cart" type="submit">
                                                    Add to cart
                                                </button>
                                                <button class="like-btn prod-info__like-btn">
                                                    <img src="./assets/icons/heart.svg"
                                                         alt=""
                                                         class="like-btn__icon icon" />
                                                    <img src="./assets/icons/red-heart.svg"
                                                         alt=""
                                                         class="like-btn__icon--liked" />
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </form>
                </div>
            </div>
        </div>
        <!-- Product tab -->
        <div class="product-container">
            <div class="prod-tab js-tabs">
                <ul class="prod-tab__list">
                    <li class="prod-tab__item">
                        Mô tả sản phẩm
                    </li>
                    <li class="prod-tab__item prod-tab__item--active">Đánh giá sản phẩm</li>
                    <li class="prod-tab__item">Các sản phẩm tương tự</li>
                </ul>
                <div class="prod-tab__contents">
                    <!-- Description -->
                    <div class="prod-tab__content">
                        <div class="row">
                            <div class="col-8 col-xl-10 col-lg-12">
                                <div class="text-content prod-tab__text-content">
                                    <p>@Model.Description</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Review -->
                    @Html.Action("GetReviewsOneProd", "Review", new { productId = Model.ProductId })

                    <!-- Similar -->
                    <div class="prod-tab__content">
                        <h2 class="prod-tab__content-heading">
                            Similar items you might like
                        </h2>
                        <div class="row row-cols-6 row-cols-xl-4 row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-2">
                            <!-- Product item 1 -->
                            <div class="col">
                                <article class="product-card">
                                    <div class="product-card__img-wrap">
                                        <a href="./product-detail.html">
                                            <img src="./assets/images/products/product-1.png"
                                                 alt=""
                                                 class="product-card__thumb" />
                                        </a>
                                        <button class="like-btn product-card__like-btn">
                                            <img src="./assets/icons/heart.svg"
                                                 alt=""
                                                 class="like-btn__icon icon" />
                                            <img src="./assets/icons/red-heart.svg"
                                                 alt=""
                                                 class="like-btn__icon--liked" />
                                        </button>
                                    </div>
                                    <h3>
                                        <a href="./product-detail.html"
                                           class="product-card__title">
                                            Coffee Beans - Espresso
                                            Arabica and Robusta Beans
                                        </a>
                                    </h3>
                                    <p class="product-card__brand">
                                        Lavazza
                                    </p>
                                    <div class="product-card__row">
                                        <span class="product-card__price">$47.00</span>
                                        <img src="./assets/icons/start.svg"
                                             alt=""
                                             class="product-card__start" />
                                        <span class="product-card__rate">4.3</span>
                                    </div>
                                </article>
                            </div>
                            <!-- Product item 2 -->
                            <div class="col">
                                <article class="product-card">
                                    <div class="product-card__img-wrap">
                                        <a href="./product-detail.html">
                                            <img src="./assets/images/products/product-2.png"
                                                 alt=""
                                                 class="product-card__thumb" />
                                        </a>
                                        <button class="like-btn product-card__like-btn">
                                            <img src="./assets/icons/heart.svg"
                                                 alt=""
                                                 class="like-btn__icon icon" />
                                            <img src="./assets/icons/red-heart.svg"
                                                 alt=""
                                                 class="like-btn__icon--liked" />
                                        </button>
                                    </div>
                                    <h3>
                                        <a href="./product-detail.html"
                                           class="product-card__title">
                                            Lavazza Coffee Blends - Try
                                            the Italian Espresso
                                        </a>
                                    </h3>
                                    <p class="product-card__brand">
                                        Lavazza
                                    </p>
                                    <div class="product-card__row">
                                        <span class="product-card__price">$53.00</span>
                                        <img src="./assets/icons/start.svg"
                                             alt=""
                                             class="product-card__start" />
                                        <span class="product-card__rate">3.4</span>
                                    </div>
                                </article>
                            </div>
                            <!-- Product item 3 -->
                            <div class="col">
                                <article class="product-card">
                                    <div class="product-card__img-wrap">
                                        <a href="./product-detail.html">
                                            <img src="./assets/images/products/product-3.png"
                                                 alt=""
                                                 class="product-card__thumb" />
                                        </a>
                                        <button class="like-btn like-btn--liked product-card__like-btn">
                                            <img src="./assets/icons/heart.svg"
                                                 alt=""
                                                 class="like-btn__icon icon" />
                                            <img src="./assets/icons/red-heart.svg"
                                                 alt=""
                                                 class="like-btn__icon--liked" />
                                        </button>
                                    </div>
                                    <h3>
                                        <a href="./product-detail.html"
                                           class="product-card__title">
                                            Lavazza - Caffè Espresso
                                            Black Tin - Ground coffee
                                        </a>
                                    </h3>
                                    <p class="product-card__brand">
                                        welikecoffee
                                    </p>
                                    <div class="product-card__row">
                                        <span class="product-card__price">$99.99</span>
                                        <img src="./assets/icons/start.svg"
                                             alt=""
                                             class="product-card__start" />
                                        <span class="product-card__rate">5.0</span>
                                    </div>
                                </article>
                            </div>
                            <!-- Product item 4 -->
                            <div class="col">
                                <article class="product-card">
                                    <div class="product-card__img-wrap">
                                        <a href="./product-detail.html">
                                            <img src="./assets/images/products/product-4.png"
                                                 alt=""
                                                 class="product-card__thumb" />
                                        </a>
                                        <button class="like-btn product-card__like-btn">
                                            <img src="./assets/icons/heart.svg"
                                                 alt=""
                                                 class="like-btn__icon icon" />
                                            <img src="./assets/icons/red-heart.svg"
                                                 alt=""
                                                 class="like-btn__icon--liked" />
                                        </button>
                                    </div>
                                    <h3>
                                        <a href="./product-detail.html"
                                           class="product-card__title">
                                            Qualità Oro Mountain Grown -
                                            Espresso Coffee Beans
                                        </a>
                                    </h3>
                                    <p class="product-card__brand">
                                        Lavazza
                                    </p>
                                    <div class="product-card__row">
                                        <span class="product-card__price">$38.65</span>
                                        <img src="./assets/icons/start.svg"
                                             alt=""
                                             class="product-card__start" />
                                        <span class="product-card__rate">4.4</span>
                                    </div>
                                </article>
                            </div>
                            <!-- Product item 5 -->
                            <div class="col">
                                <article class="product-card">
                                    <div class="product-card__img-wrap">
                                        <a href="./product-detail.html">
                                            <img src="./assets/images/products/product-2.png"
                                                 alt=""
                                                 class="product-card__thumb" />
                                        </a>
                                        <button class="like-btn product-card__like-btn">
                                            <img src="./assets/icons/heart.svg"
                                                 alt=""
                                                 class="like-btn__icon icon" />
                                            <img src="./assets/icons/red-heart.svg"
                                                 alt=""
                                                 class="like-btn__icon--liked" />
                                        </button>
                                    </div>
                                    <h3>
                                        <a href="./product-detail.html"
                                           class="product-card__title">
                                            Lavazza Coffee Blends - Try
                                            the Italian Espresso
                                        </a>
                                    </h3>
                                    <p class="product-card__brand">
                                        Lavazza
                                    </p>
                                    <div class="product-card__row">
                                        <span class="product-card__price">$53.00</span>
                                        <img src="./assets/icons/start.svg"
                                             alt=""
                                             class="product-card__start" />
                                        <span class="product-card__rate">3.4</span>
                                    </div>
                                </article>
                            </div>
                            <!-- Product item 6 -->
                            <div class="col">
                                <article class="product-card">
                                    <div class="product-card__img-wrap">
                                        <a href="./product-detail.html">
                                            <img src="./assets/images/products/product-3.png"
                                                 alt=""
                                                 class="product-card__thumb" />
                                        </a>
                                        <button class="like-btn like-btn--liked product-card__like-btn">
                                            <img src="./assets/icons/heart.svg"
                                                 alt=""
                                                 class="like-btn__icon icon" />
                                            <img src="./assets/icons/red-heart.svg"
                                                 alt=""
                                                 class="like-btn__icon--liked" />
                                        </button>
                                    </div>
                                    <h3>
                                        <a href="./product-detail.html"
                                           class="product-card__title">
                                            Lavazza - Caffè Espresso
                                            Black Tin - Ground coffee
                                        </a>
                                    </h3>
                                    <p class="product-card__brand">
                                        welikecoffee
                                    </p>
                                    <div class="product-card__row">
                                        <span class="product-card__price">$99.99</span>
                                        <img src="./assets/icons/start.svg"
                                             alt=""
                                             class="product-card__start" />
                                        <span class="product-card__rate">5.0</span>
                                    </div>
                                </article>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<script>
    const prodTabItems = document.querySelectorAll('.prod-tab__item');
    const prodTabContents = document.querySelectorAll('.prod-tab__content');
    prodTabItems.forEach((item, index) => {
        item.addEventListener('click', () => {
            const prodTabItemActive = document.querySelector('.prod-tab__item--active');
            prodTabItemActive.classList.remove('prod-tab__item--active');
            item.classList.add('prod-tab__item--active');

            const prodTabContentActive = document.querySelector('.prod-tab__content--active');
            prodTabContentActive.classList.remove('prod-tab__content--active');
            prodTabContents[index].classList.add('prod-tab__content--active');
        })
    })

</script>